<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Documents</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>📁 My Documents</h1>
    <div id="file-list" class="file-list"></div>
  </div>

  <!-- Modal for Preview -->
  <div id="preview-modal" class="modal">
    <div class="modal-content">
      <span id="close-modal">&times;</span>
      <iframe id="preview-frame" src="" frameborder="0"></iframe>
    </div>
  </div>

  <script>
    const list = document.getElementById('file-list');
    const modal = document.getElementById('preview-modal');
    const closeModal = document.getElementById('close-modal');
    const previewFrame = document.getElementById('preview-frame');

    // Load JSON and create file cards
    fetch('files.json')
      .then(res => res.json())
      .then(data => {
        data.forEach(file => {
          const card = document.createElement('div');
          card.className = 'file-card';
          card.innerHTML = `
            <h3>${file.name}</h3>
            <p>${file.path.split('/').pop()}</p>
            <div class="button-group">
              <button class="preview-btn">👁️ Preview</button>
              <a href="${file.path}" download><button>⬇️ Download</button></a>
            </div>
          `;
          list.appendChild(card);

          // Preview button click
          card.querySelector('.preview-btn').addEventListener('click', () => {
            previewFrame.src = file.path;
            modal.style.display = 'flex';
          });
        });
      })
      .catch(err => console.error('Error loading files.json:', err));

    // Close modal
    closeModal.onclick = () => modal.style.display = 'none';
    window.onclick = (e) => { if(e.target === modal) modal.style.display = 'none'; }
  </script>
</body>
</html>
